----CREIAMO DB :

CREATE DATABASE IF NOT EXISTS tripagency

----PER USARLO:

USE tripagency;

--------------CREO TABELLE:

CREATE TABLE clienti (

    id INT AUTO_INCREMENT PRIMARY KEY, 
    nome VARCHAR(30) NOT NULL,
    cognome VARCHAR(30) NOT NULL,
    telefono VARCHAR(30) NOT NULL,
    nazione VARCHAR(30) NOT NULL,
    codice_fiscale VARCHAR(16) NOT NULL,   
    documento VARCHAR(30) NOT NULL

);

CREATE TABLE destinazioni (

    id INT AUTO_INCREMENT PRIMARY KEY, 
    citta VARCHAR(30) NOT NULL,
    paese VARCHAR(30) NOT NULL,
    prezzo DECIMAL(10,2) NOT NULL,
    data_partenza DATE NOT NULL,
    data_ritorno DATE NOT NULL

);

CREATE TABELLE prenotazioni (

    id INT AUTO_INCREMENT PRIMARY KEY, 
    id_cliente INT NOT NULL,
    id_destinazione INT NULL,

    data_prenotazione DATE NOT NULL,
    acconto DECIMAL(10,2) NOT NULL,
    numero_persone INT NOT NULL,
    assicurazione BOOLEAN NOT NULL,

    CONSTRAINT fk_cliente FOREIGN KEY (id_cliente)
    REFERENCES clienti(id),
    ON DELETE CASCADE,

    CONTRAINT fk_destinazione FOREIGN KEY (id_destinazione) 
    REFERENCES destinazioni(id),
    ON DELETE CASCADE
);



** i CLIENTI e le DESTINAZIONI SONO ENTITà INDIPENDENTI 

    LE PRENOTAZOINI DIPENDONO DA ENTRAMBE TRAMITE CHIAVI ESTERNE (FK)foreign KEY

    i vincoli ON DELETE CASCADE fanno sì che, eliminando un cliente o una destinazione, vengano cancellate automaticamente anche le prenotazioni collegate